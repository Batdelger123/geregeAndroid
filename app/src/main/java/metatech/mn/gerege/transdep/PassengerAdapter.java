package metatech.mn.gerege.transdep;import android.content.Context;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.Button;import android.widget.TextView;import java.util.ArrayList;import java.util.List;import metatech.mn.gerege.R;import metatech.mn.gerege.database.PassengerType;/** * Created by yyy on 7/18/2017. */public class PassengerAdapter extends BaseAdapter {    private List<PassengerType> passengerTypes;    private static LayoutInflater inflater = null;    private List<View> views;    private List<Integer> integers;    private int iMaxCount;    private int iSelectNum;    public PassengerAdapter(Context context, List<PassengerType> passengerTypes) {        // TODO Auto-generated constructor stub        this.passengerTypes = passengerTypes;        inflater = (LayoutInflater) context                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);        views = new ArrayList<View>();        integers = new ArrayList<Integer>();        iMaxCount = 4;        iSelectNum = 0;    }    @Override    public int getCount() {        // TODO Auto-generated method stub        return passengerTypes.size();    }    @Override    public List<PassengerType> getItem(int position) {        // TODO Auto-generated method stub        return passengerTypes;    }    @Override    public long getItemId(int position) {        // TODO Auto-generated method stub        return position;    }    @Override    public View getView(int position, View convertView, ViewGroup parent) {        // TODO Auto-generated method stub        View vi = convertView;        if (vi == null) {            vi = inflater.inflate(R.layout.transdep_passenger_item, null);            TextView text = (TextView) vi.findViewById(R.id.passenger_name);            text.setText(passengerTypes.get(position).getTitle_mn().toUpperCase());            views.add(vi);            integers.add(0);            Button bAdd = (Button) vi.findViewById(R.id.add);            bAdd.setTag(position);            bAdd.setOnClickListener(new View.OnClickListener() {                public void onClick(View v) {                    int id = Integer.parseInt(((Button) v).getTag().toString());                    TextView tvCount = (TextView) views.get(id).findViewById(R.id.count);                    Button bMinus = (Button) views.get(id).findViewById(R.id.minus);                    if(iSelectNum < iMaxCount){                        iSelectNum++;                        integers.set(id, integers.get(id) + 1);                        tvCount.setText("" + integers.get(id));                        bMinus.setBackgroundResource(R.drawable.minus);                        if(iSelectNum == iMaxCount){                            for (int i = 0; i < views.size(); i++) {                                Button bAdds = (Button) views.get(i).findViewById(R.id.add);                                bAdds.setBackgroundResource(R.drawable.add_no);                            }                        }                    } else {                        for (int i = 0; i < views.size(); i++) {                            Button bAdds = (Button) views.get(i).findViewById(R.id.add);                            bAdds.setBackgroundResource(R.drawable.add_no);                        }                    }                }            });            Button bMinus = (Button) vi.findViewById(R.id.minus);            bMinus.setTag(position);            bMinus.setOnClickListener(new View.OnClickListener() {                public void onClick(View v) {                    int id = Integer.parseInt(((Button) v).getTag().toString());                    TextView tvCount = (TextView) views.get(id).findViewById(R.id.count);                    Button bMinus = (Button) views.get(id).findViewById(R.id.minus);                    Button bAdd = (Button) views.get(id).findViewById(R.id.add);                    if(integers.get(id) > 0){                        iSelectNum--;                        for (int i = 0; i < views.size(); i++) {                            Button bAdds = (Button) views.get(i).findViewById(R.id.add);                            bAdds.setBackgroundResource(R.drawable.add);                        }                        integers.set(id, integers.get(id) - 1);                        tvCount.setText("" + integers.get(id));                        if(integers.get(id)==0)bMinus.setBackgroundResource(R.drawable.minus_no);                    } else {                        bMinus.setBackgroundResource(R.drawable.minus_no);                    }                }            });        }        return vi;    }    public String InfoReturn(){        if(iSelectNum > 0) {            String s = "";            if(integers.get(0) >0 )s+=integers.get(0)+" Том хүн ";            if(integers.get(1) >0 ){                if(integers.get(0) >0 )s+=",";                s+=integers.get(1)+" Хүүхэд ";            }            return s;        } else {            return "";        }    }}